# Project Specification: comfyui-ltx2

*Generated by Daphne (Discovery Agent) on 2026-01-07*

## 1. Project Overview

**Problem:** Managing and enhancing a ComfyUI-based LTX-2 video generation deployment system that runs on RunPod GPU cloud infrastructure.

**Users:** Developers and DevOps engineers maintaining the LTX-2 video generation infrastructure.

**Scope:** Small project (1-2 weeks) with ongoing orchestration for continuous improvements.

**Project Type:** Infrastructure/Deployment project for AI video generation.

## 2. Technology Stack

| Technology | Purpose |
|------------|---------|
| Docker | Containerization |
| Docker Compose | Local development |
| CircleCI | CI/CD pipeline |
| ComfyUI | AI workflow engine |
| LTX-2 | Video generation models |
| RunPod | GPU cloud deployment |
| Shell scripts | Automation |

## 3. Team Composition

### Core Team

| Agent | Role | Model |
|-------|------|-------|
| **Ivy** | Scout | haiku |
| **Vera** | Detective | opus |
| **Ada** | Architect | opus |
| **Emilia** | Infrastructure Supervisor | opus |
| **Luna** | RunPod/GPU Supervisor | opus |
| **Bree** | Worker | sonnet |
| **Penny** | Scribe | haiku |

### Model Strategy: Balanced

- Supervisors use Opus for critical decisions
- Worker uses Sonnet for cost-effective implementation
- Scout and Scribe use Haiku for speed

## 4. Technical Decisions

| Decision | Choice | Rationale |
|----------|--------|-----------|
| Containerization | Docker + Compose | Already in use |
| CI/CD | CircleCI | Existing pipeline |
| GPU Cloud | RunPod | Cost-effective GPUs |
| Orchestration | ComfyUI JSON | Native format |
| Provisioning | Shell scripts | Simple, existing |

## 5. Key Files

| File | Purpose |
|------|---------|
| `Dockerfile` | Container build configuration |
| `docker-compose.yml` | Local development setup |
| `start.sh` | Startup automation |
| `.circleci/config.yml` | CI/CD pipeline |
| `workflows/LTX2_T2V.json` | Text-to-video workflow |
| `workflows/LTX2_I2V.json` | Image-to-video workflow |
| `workflows/LTX2_canny_to_video.json` | Edge-guided workflow |
| `workflows/LTX2_depth_to_video.json` | Depth-guided workflow |

## 6. Environment Variables

| Variable | Default | Description |
|----------|---------|-------------|
| `lightweight_fp8` | `false` | Use FP8 quantized model |
| `civitai_token` | - | CivitAI API token |
| `LORAS_IDS_TO_DOWNLOAD` | - | Custom LoRA IDs |
| `CHECKPOINT_IDS_TO_DOWNLOAD` | - | Custom checkpoint IDs |

## 7. Initial Tasks

### Setup Phase
- [ ] Initialize orchestration system
- [ ] Create Kanban project and link repository
- [ ] Document current deployment process

### Infrastructure Improvements
- [ ] Review and optimize Dockerfile
- [ ] Document RunPod deployment procedure
- [ ] Add health checks to start.sh
- [ ] Version control for ComfyUI workflows

### CI/CD Enhancement
- [ ] Review CircleCI configuration
- [ ] Add workflow validation to CI pipeline
- [ ] Document CI/CD pipeline architecture

### Workflow Management
- [ ] Add untracked workflow files to git
- [ ] Create workflow testing procedure
- [ ] Document workflow customization guide

## 8. Success Metrics

- Smooth deployment pipeline to RunPod
- Reliable container builds via CircleCI
- Easy addition of new workflows and models
- Maintainable infrastructure-as-code

## 9. Out of Scope

- Kubernetes migration
- Custom ComfyUI node development
- Multi-region deployment
- Cost analytics dashboard
- Alternative cloud providers

## 10. Kanban Integration

**Project ID:** `2c212ae1-ca5c-4402-9e2e-838fca47b67b`

All tasks are tracked in Vibe Kanban and managed through the orchestration system.
